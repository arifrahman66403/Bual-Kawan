<div class="slider">
    <div class="slide active">
      <img src="https://picsum.photos/id/1001/1600/900" alt="Slide 1">
      <div class="slide-info">
        <h2>Selamat Datang di Bual Kawan</h2>
        <p>Portal interaktif untuk menjalin komunikasi masyarakat dan pemerintah Kabupaten Siak.</p>
        <div>
            <a href="https://bualkawan.siakkab.go.id/buku-tamu.html"><i class="fas fa-pen"></i> Isi Buku Tamu</a>
            <a href="https://bualkawan.siakkab.go.id/statistik.html"><i class="fas fa-chart-bar"></i> Lihat Statistik</a>
        </div>
      </div>
    </div>
    <div class="slide">
      <img src="https://picsum.photos/id/1002/1600/900" alt="Slide 2">
      <div class="slide-info">
        <h2>Kemudahan Akses Informasi</h2>
        <p>Transparansi publik yang lebih dekat dengan warga Kabupaten Siak, tersedia 24 jam.</p>
        <div>
            <a href="https://bualkawan.siakkab.go.id/buku-tamu.html"><i class="fas fa-pen"></i> Isi Buku Tamu</a>
            <a href="https://bualkawan.siakkab.go.id/statistik.html"><i class="fas fa-chart-bar"></i> Lihat Statistik</a>
        </div>
      </div>
    </div>
    <div class="slide">
      <img src="https://picsum.photos/id/1003/1600/900" alt="Slide 3">
      <div class="slide-info">
        <h2>Siak Maju dan Bermarwah</h2>
        <p>Mari bersama-sama membangun Kabupaten Siak melalui partisipasi dan kritik yang konstruktif.</p>
        <div>
            <a href="https://bualkawan.siakkab.go.id/buku-tamu.html"><i class="fas fa-pen"></i> Isi Buku Tamu</a>
            <a href="https://bualkawan.siakkab.go.id/statistik.html"><i class="fas fa-chart-bar"></i> Lihat Statistik</a>
        </div>
      </div>
    </div>
    <button class="slider-btn prev"><i class="fa fa-chevron-left"></i></button>
    <button class="slider-btn next"><i class="fa fa-chevron-right"></i></button>
</div>

<x-layout title="Beranda">

  <section class="sirih" id="sirih-section">
    <div class="sirih-container" data-aos="fade-right">
        <h2>Sekapur Sirih</h2>
        <hr style="border:0;border-top:1px solid rgba(0,0,0,0.1);margin:15px 0;">
        <div class="sirih-content">
            <img src="https://picsum.photos/200" alt="Pimpinan" data-aos="zoom-in" data-aos-delay="300">
            <div class="sirih-text" data-aos="fade-up">
                <p>Assalamualaikum warahmatullahi wabarakatuh.  
                Selamat datang di **Bual Kawan**, portal interaktif Kabupaten Siak yang dirancang untuk mempererat komunikasi antara pemerintah dan masyarakat.  
                Melalui layanan ini, warga dapat menyampaikan saran, masukan, maupun kritik secara langsung dan transparan. </p>
                <p>Portal ini juga menyediakan informasi terkait statistik partisipasi masyarakat, kegiatan pemerintah, serta berbagai layanan publik yang dapat diakses dengan mudah.  
                Kami berharap Bual Kawan menjadi sarana yang bermanfaat, efektif, dan nyaman untuk seluruh warga Kabupaten Siak.  
                Semoga melalui media ini, tercipta komunikasi yang harmonis antara pemerintah dan masyarakat, serta mendorong Siak menjadi kabupaten yang maju, bermarwah, dan dekat dengan warganya.  
                Terima kasih atas partisipasi dan perhatian Anda.</p>
            </div>
        </div>
    </div>
  </section>
  
  <section class="berita">
      <h2 data-aos="fade-up">Berita Terkini</h2>
      <div class="berita-wrapper">
          <div class="berita-container" id="beritaSlider">
              
              <div class="berita-card" data-aos="zoom-in-up" data-aos-delay="100">
                  <img src="https://picsum.photos/id/101/400/250" alt="Berita 1">
                  <div class="berita-body">
                      <h3>Penerapan Program E-Government di Kabupaten Siak Berjalan Sukses</h3>
                      <p>15 Okt 2025 | Administrasi Publik</p>
                      <a href="#">Baca Selengkapnya <i class="fas fa-arrow-right"></i></a>
                  </div>
              </div>
              <div class="berita-card" data-aos="zoom-in-up" data-aos-delay="200">
                  <img src="https://picsum.photos/id/102/400/250" alt="Berita 2">
                  <div class="berita-body">
                      <h3>Bupati Ajak Masyarakat Partisipasi Aktif dalam Pembangunan Daerah</h3>
                      <p>12 Okt 2025 | Kegiatan Pemerintah</p>
                      <a href="#">Baca Selengkapnya <i class="fas fa-arrow-right"></i></a>
                  </div>
              </div>
              <div class="berita-card" data-aos="zoom-in-up" data-aos-delay="300">
                  <img src="https://picsum.photos/id/103/400/250" alt="Berita 3">
                  <div class="berita-body">
                      <h3>Diskominfo Siap Tingkatkan Kecepatan Akses Internet Desa</h3>
                      <p>08 Okt 2025 | Teknologi Informasi</p>
                      <a href="#">Baca Selengkapnya <i class="fas fa-arrow-right"></i></a>
                  </div>
              </div>
              <div class="berita-card" data-aos="zoom-in-up" data-aos-delay="400">
                  <img src="https://picsum.photos/id/104/400/250" alt="Berita 4">
                  <div class="berita-body">
                      <h3>Peluncuran Layanan Pengaduan Publik Terintegrasi Bual Kawan</h3>
                      <p>05 Okt 2025 | Layanan Publik</p>
                      <a href="#">Baca Selengkapnya <i class="fas fa-arrow-right"></i></a>
                  </div>
              </div>
              <div class="berita-card" data-aos="zoom-in-up" data-aos-delay="500">
                  <img src="https://picsum.photos/id/105/400/250" alt="Berita 5">
                  <div class="berita-body">
                      <h3>Sosialisasi Program Keluarga Harapan (PKH) di Wilayah Pesisir</h3>
                      <p>01 Okt 2025 | Kesejahteraan Sosial</p>
                      <a href="#">Baca Selengkapnya <i class="fas fa-arrow-right"></i></a>
                  </div>
              </div>
              <div class="berita-card" data-aos="zoom-in-up" data-aos-delay="600">
                  <img src="https://picsum.photos/id/106/400/250" alt="Berita 6">
                  <div class="berita-body">
                      <h3>Upaya Pelestarian Budaya Lokal Melalui Digitalisasi Arsip</h3>
                      <p>28 Sep 2025 | Kebudayaan</p>
                      <a href="#">Baca Selengkapnya <i class="fas fa-arrow-right"></i></a>
                  </div>
              </div>
              
          </div>
          <button class="berita-nav-btn berita-prev" onclick="moveBerita( -1 )"><i class="fas fa-chevron-left"></i></button>
          <button class="berita-nav-btn berita-next" onclick="moveBerita( 1 )"><i class="fas fa-chevron-right"></i></button>
      </div>

      <div class="berita-link-all" data-aos="fade-up" data-aos-delay="700">
          <a href="https://bualkawan.siakkab.go.id/berita.html">Lihat Semua Berita <i class="fas fa-arrow-circle-right"></i></a>
      </div>
  </section>

  <section class="galeri">
    <h2 data-aos="fade-up">Galeri Kegiatan</h2>
    <div class="masonry">
      <img src="https://picsum.photos/id/200/300/400" data-aos="fade-up-right">
      <img src="https://picsum.photos/id/201/400/300" data-aos="fade-up-left">
      <img src="https://picsum.photos/id/202/300/300" data-aos="fade-up-right" data-aos-delay="100">
      <img src="https://picsum.photos/id/203/500/400" data-aos="fade-up-left" data-aos-delay="100">
    </div>
  </section>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // Inisialisasi AOS
    AOS.init({
        duration: 1000, 
        once: true,     
    });

    // @ziedanet - JS SLIDER UTAMA (HERO)
    const slides = document.querySelectorAll('.slide');
    let index = 0;
    const nextButton = document.querySelector('.next');
    const prevButton = document.querySelector('.prev');
    const sliderElement = document.querySelector('.slider'); 
    
    function showSlide(i) { 
        slides.forEach((s, idx) => {
            s.classList.remove('active');
            s.style.zIndex = '0';
        });

        if (slides[i]) {
            slides[i].classList.add('active');
            slides[i].style.zIndex = '1';
        }
    }

    if (nextButton && prevButton) {
        nextButton.addEventListener('click', () => { 
            index = (index + 1) % slides.length; 
            showSlide(index); 
        });
        prevButton.addEventListener('click', () => { 
            index = (index - 1 + slides.length) % slides.length; 
            showSlide(index); 
        });
    }

    if (slides.length > 0) {
        // Otomatis pindah slide setiap 5 detik
        setInterval(() => { index = (index + 1) % slides.length; showSlide(index); }, 5000);
        
        // Panggil setelah semua aset dimuat
        window.addEventListener('load', () => {
            showSlide(0); 
            
            // KUNCI: Tambahkan class 'loaded' ke slider untuk memicu animasi fade-in
            if (sliderElement) {
                sliderElement.classList.add('loaded');
            }
        }); 
    }

    // @ziedanet - JS TOMBOL FLOAT TOP/BOTTOM (FINAL VERSION)
    const scrollToBtn = document.getElementById('scrollToBtn');
    
    function checkScrollPosition() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        
        // Selalu tampilkan tombol
        scrollToBtn.classList.add('show');
        
        // Cek jika sudah menggulir ke bawah (lebih dari 200px dari atas)
        if (scrollTop > 200) {
            
            // Cek jika sudah mendekati bagian bawah (misal 100px dari footer)
            if ((scrollTop + clientHeight) >= (scrollHeight - 100)) {
                // Berada di bawah -> Tombol menjadi SCROLL KE ATAS
                scrollToBtn.innerHTML = '<i class="fas fa-chevron-up"></i>';
                scrollToBtn.setAttribute('title', 'Gulir ke Atas');
                scrollToBtn.dataset.direction = 'up';
            } else {
                // Berada di tengah -> Tombol menjadi SCROLL KE ATAS
                scrollToBtn.innerHTML = '<i class="fas fa-chevron-up"></i>';
                scrollToBtn.setAttribute('title', 'Gulir ke Atas');
                scrollToBtn.dataset.direction = 'up';
            }
        } else {
             // Berada di paling atas (Hero Section) -> Tombol SCROLL KE BAWAH
            scrollToBtn.innerHTML = '<i class="fas fa-chevron-down"></i>';
            scrollToBtn.setAttribute('title', 'Gulir ke Bawah');
            scrollToBtn.dataset.direction = 'down';
        }

        // Khusus Mobile: Sembunyikan tombol jika di paling atas agar tidak tumpang tindih 
        // dengan elemen lain pada saat load, namun tetap tampilkan jika ada scroll sedikit.
        if (window.innerWidth <= 992 && scrollTop < 100) {
             scrollToBtn.classList.remove('show');
        }
    }

    function handleScrollAction() {
        // Jika arah 'down', gulir ke section 'sirih-section' (konten pertama)
        if (scrollToBtn.dataset.direction === 'down') {
            document.getElementById('sirih-section')?.scrollIntoView({ behavior: 'smooth' });
        } else {
            // Jika arah 'up', gulir ke atas halaman
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }

    // Event Listeners untuk Tombol Float
    if(scrollToBtn) {
        scrollToBtn.addEventListener('click', handleScrollAction);
        window.addEventListener('scroll', checkScrollPosition);
        // Panggil saat load untuk menentukan posisi awal
        checkScrollPosition();
    }
    // AKHIR JS TOMBOL FLOAT


    // @ziedanet - JS SLIDER BERITA
    const beritaSlider = document.getElementById('beritaSlider');
    const beritaCards = document.querySelectorAll('#beritaSlider .berita-card');
    let currentBeritaIndex = 0;
    
    function getCardsPerView() {
        if (window.innerWidth <= 768) return 1;
        if (window.innerWidth <= 1000) return 2; 
        return 3;
    }

    function moveBerita(direction) {
        if (beritaCards.length === 0) return;

        const totalCards = beritaCards.length;
        const cardsPerView = getCardsPerView();
        
        let maxIndex = totalCards - cardsPerView;
        if (maxIndex < 0) maxIndex = 0;

        currentBeritaIndex += direction;
        
        if (currentBeritaIndex < 0) {
            currentBeritaIndex = 0; 
        } else if (currentBeritaIndex > maxIndex) {
            currentBeritaIndex = maxIndex; 
        }

        // KUNCI PERBAIKAN: Hitung lebar kartu setiap kali geser untuk akurasi.
        const cardWidth = beritaCards[0].offsetWidth + 20; 
        let offset = currentBeritaIndex * cardWidth;

        if (beritaSlider) {
            beritaSlider.style.transform = `translateX(-${offset}px)`;
        }
    }

    // Set posisi awal dan tambahkan listener untuk resize (untuk responsif)
    window.addEventListener('resize', () => {
        currentBeritaIndex = 0;
        moveBerita(0);
        checkScrollPosition(); // Juga cek posisi tombol float saat resize
    });

    // PENTING: Inisialisasi Berita Slider setelah halaman selesai dimuat
    window.addEventListener('load', () => {
        moveBerita(0);
    });
    
    // @ziedanet - JS INTERAKSI KONTAK
    window.onContactSend = function(e){
        e.preventDefault();
        const name = document.getElementById('contactName')?.value.trim();
        const email = document.getElementById('contactEmail')?.value.trim();
        const msg = document.getElementById('contactMessage')?.value.trim();
        if(!name||!email||!msg){ alert('Mohon lengkapi semua form kontak.'); return; }
        alert('Terima kasih, pesan Anda sudah dikirim (demo).');
        document.getElementById('contactForm').reset();
    };


    // @ziedanet - JS MOBILE NAVIGASI
    const mbTentang = document.getElementById('mb-tentang');
    const mobileSubmenu = document.getElementById('mobileSubmenu');

    function closeMobileSub(){ 
      if(mobileSubmenu) {
        mobileSubmenu.style.display='none'; 
        mobileSubmenu.setAttribute('aria-hidden','true');
      }
    }
    function openMobileSub(){ 
      if(mobileSubmenu) {
        mobileSubmenu.style.display='block'; 
        mobileSubmenu.setAttribute('aria-hidden','false'); 
      }
    }

    if (mbTentang) {
        mbTentang.addEventListener('click', function(e){
            e.stopPropagation();
            if (mobileSubmenu && mobileSubmenu.style.display === 'block') closeMobileSub();
            else openMobileSub();
        });
    }

    // @ziedanet - Tutup submenu jika klik di luar
    document.addEventListener('click', function(e){
        const isClickOnMenu = e.target.closest('.menu') || e.target.closest('#mobileSubmenu') || e.target.closest('#mb-tentang');
        if (!isClickOnMenu) closeMobileSub();
    });

    // @ziedanet - Event listener untuk navigasi mobile yang langsung menuju link
    document.getElementById('mb-home')?.addEventListener('click', ()=> location.href = document.getElementById('mb-home').dataset.href );
    document.getElementById('mb-berita')?.addEventListener('click', ()=> location.href = document.getElementById('mb-berita').dataset.href );
    document.getElementById('mb-bukutamu')?.addEventListener('click', ()=> location.href = document.getElementById('mb-bukutamu').dataset.href );
    document.getElementById('mb-stat')?.addEventListener('click', ()=> location.href = document.getElementById('mb-stat').dataset.href );

    // @ziedanet - Tutup submenu saat resize ke desktop
    window.addEventListener('resize', function(){
        if(window.innerWidth > 992) closeMobileSub();
    });
  </script>
</x-layout>  